## Получение архива с дампом адресов

```php artisan gar:load date --full```

Где:
1. `date (default=latest)` - дата выгрузки на сайте [fias.nalog.ru](fias.nalog.ru). Данные есть не на все даты. Для получения самой свежей этот аргумент можно не использовать.
2. `--full` - если установлен этот флаг, то будет загружен весь архив (33gb+). Без него будет загружена только изменения от последней выгрузки.

Архив будет сохранён в папке `storage\app\gar\{date}` с именем `arch_full.zip` при запросе полной выгрузки и `arch.zip` при загрузке изменений.


## Парсинг полученных данных

Все команды для парсинга полученных данных находятся в пространстве имён `gar:parse` и обрабатывают конкретный тип файла и имеют следующую запись:

```php artisan gar:parse:<command name> path --region=```

Где:
1. `<command name>` - имя команды. Полный список можно получить выполнив `php artisan list`.
2. `path` - путь до архива с данными внутри папки `storage\app\gar\` вида "дата\имя архива". Пример: `2023.07.26\arch.zip`.
3. `--region= (default=null)` - указание на то, с какого региона брать данные. Некоторые виды данных разделены внутри архива на подпапки по принадлежности к региону и базово команда будет разбирать весь архив. Указывается в виде номера региона из двух знаков, например для Москвы будет `77`, для Башкортостана - `02`.

## Сбор полной строки адреса

В самих данных не поставляется полный адрес для, например, дома. Есть лишь его муниципальная и административная иерархия (цепочка родителей). Для получения полной адресной строки для всех элементов в базе (квартиры, строения, адресные объекты) существует следующая команда:

```php artisan gar:address-str date --all```

Где:
1. `date` - дата обновления объектов от которой нужно собрать адреса. Например, при передаче даты "26.07.2023 12:34:56" будут пересчитаны только те записи, что были обновлены между указанной и текущей датой.
2. `--all` - опционально. Если был передан, то будет обновлена вся база.

## Поиск по собранным данным

Для запуска поиска существует эндпоинт `/api/search?q=`. В параметр `q` следует передать строку для поиска.

Поиск осуществляется с помощью полнотекстового поиска и так как в базовых настройках минимальное кол-во символов для слова указано как `3`, некоторые города, например "Уфа", и почти все дома и квартиры будут проигнорированы. Для того, чтобы это исправить, в конфигах базы (MySQL) параметр `innodb_ft_min_token_size` можно установить со значением `1`.
